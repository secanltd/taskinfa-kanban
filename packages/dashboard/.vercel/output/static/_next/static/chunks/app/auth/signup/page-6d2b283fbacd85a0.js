(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{6633:(e,s,a)=>{"use strict";a.d(s,{default:()=>n});var r=a(4568),t=a(7620),o=a(2942),l=a(7261),d=a.n(l);function n(){var e;let s,a=(0,o.useRouter)(),[l,n]=(0,t.useState)({email:"",password:"",confirmPassword:"",name:""}),[i,c]=(0,t.useState)({}),[m,u]=(0,t.useState)(!1),p=l.password?(e=l.password,s=0,(e.length>=8&&s++,e.length>=12&&s++,/[a-z]/.test(e)&&s++,/[A-Z]/.test(e)&&s++,/[0-9]/.test(e)&&s++,/[^A-Za-z0-9]/.test(e)&&s++,s<=2)?{score:s,label:"Weak",color:"bg-red-500"}:s<=4?{score:s,label:"Medium",color:"bg-yellow-500"}:{score:s,label:"Strong",color:"bg-green-500"}):null,w=async e=>{if(e.preventDefault(),c({}),(()=>{let e={};return l.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(e.email="Invalid email format"):e.email="Email is required",l.password?l.password.length<8?e.password="Password must be at least 8 characters":/[A-Z]/.test(l.password)?/[a-z]/.test(l.password)?/[0-9]/.test(l.password)||(e.password="Password must contain at least one number"):e.password="Password must contain at least one lowercase letter":e.password="Password must contain at least one uppercase letter":e.password="Password is required",l.confirmPassword?l.password!==l.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",c(e),0===Object.keys(e).length})()){u(!0);try{let e=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.email,password:l.password,name:l.name||void 0})}),s=await e.json();if(!e.ok)return void(s.details&&Array.isArray(s.details)?c({password:s.details.join(", ")}):c({general:s.error||"Signup failed"}));a.push("/dashboard"),a.refresh()}catch(e){c({general:"An error occurred. Please try again."})}finally{u(!1)}}};return(0,r.jsx)("div",{className:"w-full max-w-md",children:(0,r.jsxs)("div",{className:"bg-white shadow-lg rounded-lg px-8 py-10",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2 text-center",children:"Create your account"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-6 text-center",children:"Your workspace will be created automatically"}),i.general&&(0,r.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,r.jsx)("p",{className:"text-sm text-red-600",children:i.general})}),(0,r.jsxs)("form",{onSubmit:w,className:"space-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Name (optional)"}),(0,r.jsx)("input",{id:"name",type:"text",autoComplete:"name",value:l.name,onChange:e=>n({...l,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Your name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,r.jsx)("input",{id:"email",type:"email",autoComplete:"email",value:l.email,onChange:e=>n({...l,email:e.target.value}),className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(i.email?"border-red-300":"border-gray-300"),placeholder:"you@example.com"}),i.email&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,r.jsx)("input",{id:"password",type:"password",autoComplete:"new-password",value:l.password,onChange:e=>n({...l,password:e.target.value}),className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(i.password?"border-red-300":"border-gray-300"),placeholder:"At least 8 characters"}),i.password&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.password}),p&&l.password&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full transition-all ".concat(p.color),style:{width:"".concat(p.score/6*100,"%")}})}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-600",children:p.label})]}),(0,r.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Use 8+ characters with uppercase, lowercase, and numbers"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),(0,r.jsx)("input",{id:"confirmPassword",type:"password",autoComplete:"new-password",value:l.confirmPassword,onChange:e=>n({...l,confirmPassword:e.target.value}),className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(i.confirmPassword?"border-red-300":"border-gray-300"),placeholder:"Re-enter your password"}),i.confirmPassword&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:i.confirmPassword})]}),(0,r.jsx)("button",{type:"submit",disabled:m,className:"w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(m?"opacity-50 cursor-not-allowed":""),children:m?"Creating account...":"Create account"})]}),(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",(0,r.jsx)(d(),{href:"/auth/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Log in"})]})})]})})}},6690:(e,s,a)=>{Promise.resolve().then(a.bind(a,6633))}},e=>{e.O(0,[72,587,902,358],()=>e(e.s=6690)),_N_E=e.O()}]);